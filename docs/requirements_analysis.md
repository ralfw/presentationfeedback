# Requirements Analysis
A stepwise slicing of requirements. Each slice covers a smaller scope in terms of functional and non-functional requirements.

## The whole software system
The whole software system is used by users in three different roles. Roles depend on the sofware system:

* Attendees give feedback to sessions
* Speakers receive feedback
* Conference organizer sets up a conference with its sessions for feedback - and checks feedback

The software system on the other hand depends on a couple of resources:

* Sessions and feedback needs to be stored in some kind of persistence medium
* Speakers and attendees are notified by email

![https://cacoo.com/diagrams/xMafh0HqClkR0U6B](images/sysctx.png)

Sooner or later details about how system and context/environment communicate have to be determined, e.g. paradigms, API/frameworks, products to use. But not yet :-)

## Applications
For each role the question is, how does it work with the software system. Do all roles use the same application (entry point, VS project) or are their different applications for each role?

The latter could be very naturally the case if the roles used different devices.

But how about this for a start:

* Speakers only get emails from the system.
* Conference organizers register conferences with all their sessions by uploading a CSV file.
* Attendees give feedback through a web application with several pages (aka dialogs).

## Dialogs

### Conference organizer application (coapp)
There need only be a very simple way to upload a CSV file. For a start the name of the file can be structured like this:

    conferenceId "-" conferenceTitle ".txt"

Example:

    dw15 - Developer Week 2015.txt
    
Each line of the CSV file describes a single session of the conference. Columns needed:

* Session id, e.g. t1s1
* Session title, Introduction to Flow Design
* Session starting time, e.g. 2015-04-10T10:00:00
* Session ending time, e.g. 2015-04-10T10:45:00
* Speaker name, e.g. Ralf Westphal
* Speaker email address, e.g. info@ralfw.de

The first line will be assumed to be column headlines. Columns will be separated by a single TAB.

For a start files are assumed to be always wellformed.

Feedback for all sessions of the conference can be downloaded at any time from the conference application by navigating to the URL _/stats/confernceid_.

The feedback file will look like the conference CSV file with additional columns:

* Green: number of attendees who voted with green
* Yellow: number of attendees who voted with yellow
* Red: number of attendees who voted with red
* Comments: All comments concatenated into one string; each comment starts on a new line and is preceded with the email address of the commenter. The contents of this column are enclosed in "".

### Attendee feedback application (afapp)
Attendees enter the website through some root URL, e.g. presentationfeedback.com or presentationfeedback.apphb.com. This root URL will be abbreviated with / from here on.

![](images/pagetransitions.png)

#### Home /
The homepage shows the sessions of a particular conference. To identify the conference its id needs to be passed to the page, e.g. _/dw15_ or _/?conferenceid=dw15_.

![](images/conference.jpg)

Clicking on a session title leads to the feedback page for that session.

All sessions of the conferences should be listet, but only the ones where feedback can actually be given should be selectable.

Sessions could be grouped according to date and should be sorted according to starting time.

#### Feedback /feedback
On the feedback page the attendee identifies himself with his email address, selects a session score (traffic light) and optionally enters a comment.

![](images/evaluate_session.jpg)

When calling the page the conference and the session need to be identified. This data could be passed using query params, e.g. _/feedback?conferenceid=dw15&sessionid=t1s1_.

Submitting the feedback leads back to the conference homepage. _A cancel button does not seem to be necessary; the same effect can be reached by backspacing to the previous page._

### Speaker application (sapp)
There are no dialogs in the speaker application, because the speaker on interacts through email with the software system. His application is the email client.

An email is sent to the speaker by the software system once the feedback period for a session is over.

_TBD: How does the software system check if feedback periods are over?_

## Interactions
From the dialogs in the applications a number of interactions (commands, queries) can be derived.

### coapp/upload (command)
Upload a conference file. Example commands:

	c:> coapp upload "dw15 - DevWeek 2015.txt"
	Registered DevWeek 2015 (dw15) with 23 sessions

Alternatively the meta data for the conference could be passed separately from the file name, e.g.

	c:> coapp upload dw15 "DevWeek 2015" dw2015.txt

### coapp/download feedback (query)
Download the feedback for a conference.

	c:> coapp downloadfeedback dw15
	Created dw15feedback.txt with 9 sessions rated out of 23
	
### afapp/give feedback (command)
Give feedback for a session.

	c:> afapp vote dw15 t1s1 green peter@yahoo.com "A terrific session!"
	Thank you for your feedback!
	
### afapp/session overview (query)
Display the list of sessions of a conference.

	c:> afapp sessions dw15
	You can give feedback for:
	+ t1s1: Introduction to Flow Design, Ralf Westphal
	+ t1s2: TDD done right, Corey Haines
	No feedback at this time for:
	+ Scrum 4 u, Ken Schwaber
	+ C# 6.0, Anders Hejlsberg

### afapp/speaker notification (command)
Start a worker to notify speakers of the feedback for their sessions once their feedback period is over.

	c:>afapp speakernotification start
	Watching session feedback periods for:
	+ dw15
	+ sa15
	Running since 11.01.2015 15:49...

The worker keeps running until stopped by Ctrl-C or closing the terminal window. Alternatively the worker could be stopped by another command, e.g.

	c:>afapp speakernotification stop
	Stopped watching!
	
